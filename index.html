<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="utf-8" />
    <title>Memory in France</title>
    <!-- CSS 영역 -->
    <style type="text/css">
        /* body {
            margin: 0;
            display: flex;
            justify-content: center;
        } */

        #canvas {
            margin: 10px;
            padding: 10px;
            background: white;
            border: thin inset black;
            /* canvas 태그가 아닌 이 곳에서 width, height 지정하면
            캔버스 크기는 적용이 되지만, 서피스 크기는 기본 크기인 300x150으로 지정됨 */
        }
    </style>
</head>

<body>
    <!-- Canvas 영역 -->
    <canvas id="canvas" width="1200px" height="800px">
        Canvas not supported
    </canvas>
    <!-- JS 영역 -->
    <script type="text/javascript">
        var cvs = document.getElementById('canvas'),
            ctx = cvs.getContext('2d');

        var grad = ctx.createRadialGradient(
            600, 800, 450,
            600, 800, 220
        );
        grad.addColorStop(0, 'rgb(13,29,88)');
        grad.addColorStop(0.3, 'rgb(21,42,105)');
        grad.addColorStop(0.8, 'rgb(21,108,179)');
        grad.addColorStop(1, 'rgb(14,142,207)');

        // 영역 나눠서 보기 위한 함수
        function initZone() {
            // 1. Roy Lichtenstein, Modular Painting with Four Panels, 1969
            ctx.fillStyle = 'rgb(240,240,240)';
            ctx.fillRect(0, 0, 400, 400);

            // 2. Eiffel Tower
            ctx.fillStyle = grad;
            ctx.fillRect(400, 0, 400, 800)

            // 3. Musée Rodin Paris Poster (Hommage)
            ctx.fillStyle = 'rgb(250,250,250)';
            ctx.fillRect(800, 0, 400, 400);
        }

        // 1번째 작품
        function draw1() {
            // 우측하단 yellow-fill-stroke 삼각형
            function triangle1() {
                // 노란 fill 삼각형
                ctx.fillStyle = 'rgb(230,219,33)';

                ctx.beginPath();
                ctx.moveTo(400, 0);
                ctx.lineTo(400, 400);
                ctx.lineTo(0, 400);
                ctx.closePath();
                ctx.fill();

                // 6px 검정 stroke 삼각형
                ctx.strokeStyle = 'rgb(43,44,49)';
                ctx.lineWidth = 6;

                ctx.beginPath();
                ctx.moveTo(400, 400);
                ctx.lineTo(400, 0);
                ctx.lineTo(0, 400);
                ctx.stroke();
            }

            // 우측하단 pattern-fill-stroke 삼각형
            function triangle2() {
                // 흰 배경 파란 땡땡이 삼각형
                var patternCanvas = document.createElement('canvas'),
                    patternContext = patternCanvas.getContext('2d');

                patternCanvas.width = 6;
                patternCanvas.height = 6;

                patternContext.fillStyle = 'rgb(240,240,240)';
                patternContext.fillRect(0, 0, patternCanvas.width, patternCanvas.height);
                patternContext.arc(3, 3, 1.9, 0, 2 * Math.PI);
                patternContext.fillStyle = 'rgb(32,23,132)';
                patternContext.fill();

                var pattern = ctx.createPattern(patternCanvas, 'repeat');
                ctx.fillStyle = pattern;

                ctx.beginPath();
                ctx.moveTo(0, 400);
                ctx.lineTo(330, 70);
                ctx.lineTo(330, 400);
                ctx.fill();

                // 6px 검정 stroke 삼각형
                ctx.strokeStyle = 'rgb(43,44,49)';
                ctx.lineWidth = 6;

                ctx.beginPath();
                ctx.moveTo(330, 400);
                ctx.lineTo(330, 70);
                ctx.lineTo(0, 400);
                ctx.stroke();
            }

            // 좌측상단 black-fill-삼각형
            function triangle3() {
                // 검정 fill 삼각형
                ctx.fillStyle = 'rgb(43,44,49)';

                ctx.beginPath();
                ctx.moveTo(0, 0);
                ctx.lineTo(270, 0);
                ctx.lineTo(0, 270);
                ctx.fill();
            }

            // black 직선 2개
            function line() {
                // 6px 검정선
                ctx.strokeStyle = 'rgb(43,44,49)';
                ctx.lineWidth = 6;

                ctx.beginPath();
                ctx.moveTo(295, 0);
                ctx.lineTo(0, 295);
                ctx.stroke();

                ctx.beginPath();
                ctx.moveTo(320, 0);
                ctx.lineTo(0, 320);
                ctx.stroke();
            }

            // 좌측상단 white-fill-호
            function arc1() {
                // 하얀 fill 호
                ctx.fillStyle = 'rgb(240,240,240)';

                ctx.beginPath();
                ctx.arc(0, 0, 130, 0, 0.5 * Math.PI);
                ctx.lineTo(0, 0); // 주석처리하면 모양 변함
                ctx.fill();
            }

            // 우측상단 white-fill-stroke-호 & pattern-fill-stroke-호
            function arc2() {
                // 6px 검정 stroke & 하얀 fill 호
                ctx.fillStyle = 'rgb(240,240,240)';

                ctx.beginPath();
                ctx.arc(400, 0, 200, 0.5 * Math.PI, 1 * Math.PI);
                ctx.lineTo(400, 0);
                ctx.fill();

                ctx.strokeStyle = 'rgb(43,44,49)';
                ctx.lineWidth = 6;

                ctx.beginPath();
                ctx.arc(400, 0, 200, 0.5 * Math.PI, 1 * Math.PI);
                ctx.stroke();

                // 검정배경 흰 땡땡이 배경 호
                var patternCanvas = document.createElement('canvas'),
                    patternContext = patternCanvas.getContext('2d');

                patternCanvas.width = 6;
                patternCanvas.height = 6;

                patternContext.fillStyle = 'rgb(43,44,49)';
                patternContext.fillRect(0, 0, patternCanvas.width, patternCanvas.height);
                patternContext.arc(3, 3, 1.6, 0, 2 * Math.PI);
                patternContext.fillStyle = 'rgb(240,240,240)';
                patternContext.fill();

                var pattern = ctx.createPattern(patternCanvas, 'repeat');
                ctx.fillStyle = pattern;

                ctx.beginPath();
                ctx.arc(400, 0, 130, 0.5 * Math.PI, 1 * Math.PI);
                ctx.lineTo(400, 0);
                ctx.fill();

                ctx.strokeStyle = 'rgb(43,44,49)';
                ctx.lineWidth = 6;

                ctx.beginPath();
                ctx.arc(400, 0, 130, 0.5 * Math.PI, 1 * Math.PI);
                ctx.stroke();
            }

            // 좌측하단 yellow-fill-stroke 호
            function arc3() {
                // 노란색 fill 호
                ctx.fillStyle = 'rgb(230,219,33)';

                ctx.beginPath();
                ctx.arc(0, 400, 200, 1.5 * Math.PI, 2 * Math.PI);
                ctx.lineTo(0, 400);
                ctx.fill();

                ctx.strokeStyle = 'rgb(43,44,49)';
                ctx.lineWidth = 6;

                ctx.beginPath();
                ctx.arc(0, 400, 200, 1.5 * Math.PI, 2 * Math.PI);
                ctx.stroke();
            }

            // 좌측하단 white-fill-stroke호 & pattern-fill-stroke-호
            function arc4() {
                // 하얀색 fill 호
                ctx.fillStyle = 'rgb(240,240,240)';

                ctx.beginPath();
                ctx.arc(0, 400, 130, 1.5 * Math.PI, 2 * Math.PI);
                ctx.lineTo(0, 400);
                ctx.fill();

                ctx.strokeStyle = 'rgb(43,44,49)';
                ctx.lineWidth = 6;

                ctx.beginPath();
                ctx.arc(0, 400, 130, 1.5 * Math.PI, 2 * Math.PI);
                ctx.stroke();

                // 흰배경 검은 땡땡이 호
                var patternCanvas = document.createElement('canvas'),
                    patternContext = patternCanvas.getContext('2d');

                patternCanvas.width = 6;
                patternCanvas.height = 6;

                patternContext.fillStyle = 'rgb(240,240,240)';
                patternContext.fillRect(0, 0, patternCanvas.width, patternCanvas.height);
                patternContext.arc(3, 3, 1.8, 0, 2 * Math.PI);
                patternContext.fillStyle = 'rgb(43,44,49)';
                patternContext.fill();

                var pattern = ctx.createPattern(patternCanvas, 'repeat');
                ctx.fillStyle = pattern;

                ctx.beginPath();
                ctx.arc(0, 400, 130, 1.5 * Math.PI, 1.75 * Math.PI);
                ctx.lineTo(0, 400);
                ctx.fill();

                ctx.strokeStyle = 'rgb(43,44,49)';
                ctx.lineWidth = 6;

                ctx.beginPath();
                ctx.arc(0, 400, 130, 1.5 * Math.PI, 1.75 * Math.PI);
                ctx.lineTo(0, 400);
                ctx.stroke();
            }

            // 우측하단 pattern-fill-stroke-호
            function arc5() {
                // 흰배경 검은 땡땡이 호
                var patternCanvas = document.createElement('canvas'),
                    patternContext = patternCanvas.getContext('2d');

                patternCanvas.width = 6;
                patternCanvas.height = 6;

                patternContext.fillStyle = 'rgb(43,44,49)';
                patternContext.fillRect(0, 0, patternCanvas.width, patternCanvas.height);
                patternContext.arc(3, 3, 1.8, 0, 2 * Math.PI);
                patternContext.fillStyle = 'rgb(240,240,240)';
                patternContext.fill();

                var pattern = ctx.createPattern(patternCanvas, 'repeat');
                ctx.fillStyle = pattern;

                ctx.beginPath();
                ctx.arc(400, 400, 130, 1 * Math.PI, 1.5 * Math.PI);
                ctx.lineTo(400, 400);
                ctx.fill();

                ctx.strokeStyle = 'rgb(43,44,49)';
                ctx.lineWidth = 6;

                ctx.beginPath();
                ctx.arc(400, 400, 130, 1 * Math.PI, 1.5 * Math.PI);
                ctx.lineTo(400, 400);
                ctx.stroke();
            }

            triangle3();
            line();
            arc2();
            triangle1();
            triangle2();
            arc1();
            arc3();
            arc4();
            arc5();
        }

        // 2번째 작품
        function draw2(r, g, b) {
            // 텍스트 "Tour Eiffel"
            function text1() {
                ctx.font = "48px Arial";
                ctx.textAlign = 'center';
                ctx.fillStyle = 'rgb(' + r + ',' + g + ',' + b + ')';
                ctx.fillText("Tour         Eiffel", 600, 174);
            }

            // strokeStyle(색상, 두께) 지정
            function setStroke() {
                ctx.strokeStyle = 'rgb(' + r + ',' + g + ',' + b + ')';
                ctx.lineWidth = 5;
            }

            // 외부 베지어 곡선
            function bezier1() {
                ctx.beginPath();
                ctx.moveTo(400, 800); // 시작점
                ctx.bezierCurveTo(
                    565, 655, // 제어점1
                    600, 70, // 제어점2
                    600, 70 // 끝점
                );
                ctx.stroke();

                ctx.beginPath();
                ctx.moveTo(800, 800); // 시작점
                ctx.bezierCurveTo(
                    635, 655, // 제어점1
                    600, 70, // 제어점2
                    600, 70 // 끝점
                );
                ctx.stroke();
            }

            // 내부 베지어 곡선
            function bezier2() {
                // 1층 베지어
                function floor1() {
                    ctx.beginPath();
                    ctx.moveTo(515, 700); // 시작점
                    ctx.bezierCurveTo(
                        600, 635, // 제어점1
                        680, 700, // 제어점2
                        685, 700 // 끝점
                    );
                    ctx.stroke();
                }

                // 2층 베지어
                function floor2() {
                    ctx.beginPath();
                    ctx.moveTo(550, 615); // 시작점
                    ctx.bezierCurveTo(
                        560, 600, // 제어점1
                        580, 475, // 제어점2
                        580, 475 // 끝점
                    );
                    ctx.stroke();

                    ctx.beginPath();
                    ctx.moveTo(650, 615); // 시작점
                    ctx.bezierCurveTo(
                        640, 600, // 제어점1
                        620, 475, // 제어점2
                        620, 475 // 끝점
                    );
                    ctx.stroke();
                }
                
                // 3층 베지어
                function floor3() {
                    ctx.beginPath();
                    ctx.moveTo(590, 425); // 시작점
                    ctx.bezierCurveTo(
                        600, 360, // 제어점1
                        600, 330, // 제어점2
                        600, 330 // 끝점
                    );
                    ctx.stroke();

                    ctx.beginPath();
                    ctx.moveTo(610, 425); // 시작점
                    ctx.bezierCurveTo(
                        600, 360, // 제어점1
                        600, 330, // 제어점2
                        600, 330 // 끝점
                    );
                    ctx.stroke();
                }

                floor1();
                floor2();
                floor3();
            }

            // 아래 뚫린 공간 호
            function arc() {
                ctx.beginPath();
                ctx.arc(600, 800, 115, 0, 1 * Math.PI, true); // true : 반시계 방향, false(default) : 시계 방향
                ctx.stroke();
            }

            // 선
            function line() {
                // 1층 베지어 연결 선
                function floor1() {
                    ctx.beginPath();
                    ctx.moveTo(515, 700);
                    ctx.lineTo(535, 655);
                    ctx.lineTo(665, 655);
                    ctx.lineTo(685, 700);
                    ctx.stroke();
                }

                // 1단
                function stage1() {
                    ctx.fillStyle = grad;
                    ctx.beginPath();
                    ctx.moveTo(485, 615);
                    ctx.lineTo(715, 615);
                    ctx.lineTo(705, 640);
                    ctx.lineTo(495, 640);
                    ctx.fill();

                    ctx.beginPath();
                    ctx.moveTo(485, 615);
                    ctx.lineTo(715, 615);
                    ctx.lineTo(705, 640);
                    ctx.lineTo(495, 640);
                    ctx.closePath();
                    ctx.stroke();
                }
                
                // 2단
                function stage2() {
                    ctx.fillStyle = grad;
                    ctx.beginPath();
                    ctx.moveTo(535, 425);
                    ctx.lineTo(665, 425);
                    ctx.lineTo(655, 460);
                    ctx.lineTo(545, 460);
                    ctx.fill();

                    ctx.beginPath();
                    ctx.moveTo(535, 425);
                    ctx.lineTo(665, 425);
                    ctx.lineTo(655, 460);
                    ctx.lineTo(545, 460);
                    ctx.closePath();
                    ctx.stroke();
                }
                
                // 3단
                function stage3() {
                    ctx.fillStyle = grad;
                    ctx.beginPath();
                    ctx.moveTo(583, 170);
                    ctx.lineTo(617, 170);
                    ctx.lineTo(615, 147)
                    ctx.lineTo(585, 147)
                    ctx.fill();

                    ctx.beginPath();
                    ctx.moveTo(583, 170);
                    ctx.lineTo(617, 170);
                    ctx.lineTo(615, 147)
                    ctx.lineTo(585, 147)
                    ctx.closePath();
                    ctx.stroke();
                }

                // 2층 베지어 연결 선
                function floor2() {
                    ctx.beginPath();
                    ctx.moveTo(580, 475);
                    ctx.lineTo(620, 475);
                    ctx.stroke();
                }

                floor1();
                stage1();
                floor2();
                stage2();
                stage3();
            }

            text1();
            setStroke();
            bezier1();
            bezier2();
            arc();
            line();
        }

        // 3번째 작품
        function draw3() {
            // stroke 스타일(색상, 두께) 지정
            ctx.strokeStyle = 'rgb(43,44,49)';
            ctx.lineWidth = 5;

            // 그림자 속성 지정
            ctx.shadowOffsetX = 6;
            ctx.shadowOffsetY = 6;
            ctx.shadowBlur = 8;

            function hair() {
                var img = new Image();
                img.onload = function () {
                    pos = {
                        x: 986,
                        y: 121,
                    };

                    ctx.shadowColor = 'black';
                    ctx.drawImage(img, pos.x, pos.y);
                    ctx.shadowColor = 'transparent';
                    ctx.strokeRect(pos.x, pos.y, img.width, img.height);
                };
                img.src = 'resource/1hair.png';
            }

            function skirt() {
                var img = new Image();
                img.onload = function () {
                    pos = {
                        x: 835,
                        y: 264,
                    };

                    ctx.shadowColor = 'black';
                    ctx.drawImage(img, pos.x, pos.y);
                    ctx.shadowColor = 'transparent';
                    ctx.strokeRect(pos.x, pos.y, img.width, img.height);
                };
                img.src = 'resource/2skirt.png';
            }

            function face() {
                var img = new Image();
                img.onload = function () {
                    pos = {
                        x: 862,
                        y: 11,
                    };

                    ctx.shadowColor = 'black';
                    ctx.drawImage(img, pos.x, pos.y);
                    ctx.shadowColor = 'transparent';
                    ctx.strokeRect(pos.x, pos.y, img.width, img.height);
                };
                img.src = 'resource/3face.png';
            }

            function arm() {
                var img = new Image();
                img.onload = function () {
                    pos = {
                        x: 857,
                        y: 155,
                    };

                    ctx.shadowColor = 'black';
                    ctx.drawImage(img, pos.x, pos.y);
                    ctx.shadowColor = 'transparent';
                    ctx.strokeRect(pos.x, pos.y, img.width, img.height);
                };
                img.src = 'resource/4arm.png';
            }

            function mouth() {
                var img = new Image();
                img.onload = function () {
                    pos = {
                        x: 819,
                        y: 106,
                    };

                    ctx.shadowColor = 'black';
                    ctx.drawImage(img, pos.x, pos.y);
                    ctx.shadowColor = 'transparent';
                    ctx.strokeRect(pos.x, pos.y, img.width, img.height);
                };
                img.src = 'resource/5mouth.png';
            }

            hair();
            skirt();
            face();
            arm();
            mouth();
        }

        initZone();
        draw1();
        draw2(0, 0, 0);
        draw3();

        var i = 0, flag = true;

        setInterval(function () {
            // 2. Eiffel Tower
            // 이 코드가 없으면 겹치는 부분의 일부가 튀어나옴
            ctx.fillStyle = grad;
            ctx.fillRect(400, 0, 400, 800)

            if (flag) {
                draw2(i++, i++, i++);
                if (i === 255)
                    flag = !flag;
            }
            else {
                draw2(i--, i--, i--);
                if (i === 0)
                    flag = !flag;
            }
        }, 10);

    </script>
</body>

</html>
